#ifndef PLASTICDETECTOR_H
#define PLASTICDETECTOR_H

#include <Arduino.h>
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"
#include "esp_system.h"
#include "esp_log.h"
#include "driver/uart.h"
#include "string.h"
#include "driver/gpio.h"
#include <HardwareSerial.h>

#define PETTAG "PET"

class PlasticDetector{
    private:
        const char* indices[201]={"0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200"};
        const char* wv[201]={"1550","1552","1554","1556","1558","1560","1562","1564","1566","1568","1570","1572","1574","1576","1578","1580","1582","1584","1586","1588","1590","1592","1594","1596","1598","1600","1602","1604","1606","1608","1610","1612","1614","1616","1618","1620","1622","1624","1626","1628","1630","1632","1634","1636","1638","1640","1642","1644","1646","1648","1650","1652","1654","1656","1658","1660","1662","1664","1666","1668","1670","1672","1674","1676","1678","1680","1682","1684","1686","1688","1690","1692","1694","1696","1698","1700","1702","1704","1706","1708","1710","1712","1714","1716","1718","1720","1722","1724","1726","1728","1730","1732","1734","1736","1738","1740","1742","1744","1746","1748","1750","1752","1754","1756","1758","1760","1762","1764","1766","1768","1770","1772","1774","1776","1778","1780","1782","1784","1786","1788","1790","1792","1794","1796","1798","1800","1802","1804","1806","1808","1810","1812","1814","1816","1818","1820","1822","1824","1826","1828","1830","1832","1834","1836","1838","1840","1842","1844","1846","1848","1850","1852","1854","1856","1858","1860","1862","1864","1866","1868","1870","1872","1874","1876","1878","1880","1882","1884","1886","1888","1890","1892","1894","1896","1898","1900","1902","1904","1906","1908","1910","1912","1914","1916","1918","1920","1922","1924","1926","1928","1930","1932","1934","1936","1938","1940","1942","1944","1946","1948","1950"};

    public:
        PlasticDetector() {;} //Constructor
        void init();
        bool lightON();
        bool lightOFF();
        bool start_meas();
        bool read_meas();
        bool measure(float * index);
};

#endif